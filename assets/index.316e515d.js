import{r as e,o as a,c as t,a as s,b as i,_ as r,d as n,t as l,e as c,f as o,u as d,p,g as u,h,F as g,i as f,j as m,k as v,l as b,m as y,n as k,w as x,v as w,q as _,s as A,x as P,y as C,z as S,A as j,B as E,C as M,D as I,E as L,G as q,H as T}from"./vendor.72f2de36.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const U={class:"main"},B=[i("span",{class:"iconfont icon-top"},null,-1)],D={setup(r){const n=()=>scrollTo(0,0);return(r,l)=>{const c=e("router-view");return a(),t("div",U,[s(c),i("div",{class:"return-top",onClick:n},B)])}}};function F(e,a="{y}-{m}-{d} {h}:{i}:{s}"){if(0===arguments.length||!e)return"";const t=a||"{y}-{m}-{d} {h}:{i}:{s}";let s;"object"==typeof e?s=e:("string"==typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"==typeof e&&10===e.toString().length&&(e*=1e3),s=new Date(e));const i={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),a:s.getDay()},r=t.replace(/{([ymdhisa])+}/g,((e,a)=>{const t=i[a];return"a"===a?["日","一","二","三","四","五","六"][t]:t.toString().padStart(2,"0")}));return r}function H(e,a="success"){r({message:e,type:a,showClose:!0})}function O(e,a,t,s){let i="www.bilibili.com/video/av"+e;return 11!=s&&17!=s||(i="t.bilibili.com/"+a),12==s&&(i="www.bilibili.com/read/cv"+e),`https://${i}/#reply${t}`}const $={key:0,class:"article"},N=i("div",{class:"user inline"}," 生成结果： ",-1),R=[i("span",{class:"iconfont icon-copy"},null,-1),n("复制 ")],z={class:"article-text"},G={props:{isMarked:Boolean,prefix:String,generated:String},setup(e){const s=e,r=()=>{const e=new o(".copy",{text:()=>s.prefix+s.generated}).on("success",(()=>{H("复制成功"),e.destroy()})).on("error",(()=>H("复制失败","error")))};return(e,o)=>s.generated.length>0?(a(),t("div",$,[i("div",{class:"article-header"},[N,i("div",{class:"right-button hover pr-2 copy",onClick:r},R)]),i("div",z,[n(l(s.prefix),1),i("a",null,l(s.generated),1)])])):c("",!0)}};const V={key:0,class:"article"},Z={class:"article-header"},W={class:"user inline"},J={class:"iconfont icon-time"},K=[i("span",{class:"iconfont icon-copy"},null,-1),n("复制 ")],Q={class:"article-text"},X={props:{isMarked:Boolean,time:Number,prefix:String,generated:String},setup(e){const s=e,r=()=>{const e=new o(".copy",{text:()=>s.prefix+s.generated}).on("success",(()=>{H("复制成功"),e.destroy()})).on("error",(()=>H("复制失败","error")))};return(o,p)=>s.generated.length>0?(a(),t("div",V,[i("div",Z,[i("div",W,[i("span",J,l(d(F)(e.time)),1)]),i("div",{class:"right-button hover pr-2 copy",onClick:r},K)]),i("div",Q,[n(l(s.prefix),1),i("a",null,l(s.generated),1)])])):c("",!0)}};p("data-v-0bad6957");const Y={class:"article-content"},ee={key:0,class:"is-marked"};u();const ae={props:{articleArray:Array},setup(e){const s=h(!1);return(i,r)=>(a(),t("div",Y,[e.articleArray.length>0?(a(),t("div",ee," 最近生成的 "+l(e.articleArray.length)+" 篇小作文 ",1)):c("",!0),(a(!0),t(g,null,f(e.articleArray,(e=>(a(),m(X,{key:e.time,isMarked:s.value,time:e.time,prefix:e.prefix,generated:e.generated},null,8,["isMarked","time","prefix","generated"])))),128))]))}};ae.__scopeId="data-v-0bad6957";const te=v.create({baseURL:"https://api2.infedg.xyz/",timeout:3e4});te.interceptors.request.use((e=>{if("get"==e.method&&e.params&&e.url){let a=[];for(const s in e.params)a.push(`${s}=${encodeURIComponent(e.params[s])}`);const t=a.join("&");e.url+=e.url.includes("?")?"&":"?"+t,e.params={}}return"post"==e.method&&(e.headers["Content-Type"]="application/json"),e})),te.interceptors.response.use((e=>{if(0==e.data.code)return e;H(e.data.state,"error")}),(e=>(H("服务器端可能发生错误,请稍后重试","error"),Promise.reject(e))));const se={check:async function(e){const a={prefix:"",generated:""},t={prefix:e};return await te.post("generate",t).then((e=>{const t=e.data.reply;a.prefix=t.prefix,a.generated=t.generated})).catch((e=>{throw new Error(e)})),a},query:async function(e){let a={articleArray:[]};return await te.get("query",{params:e}).then((e=>{a.articleArray=e.data.reply})).catch((e=>{throw new Error(e)})),a},ranking:async function(e){let a={startTime:"",lastUpdate:"",articleArray:[],total:0};return await te.get("ranking/",{params:e}).then((e=>{const t=e.data.data;a.startTime=F(t.start_time),a.lastUpdate=F(t.end_time),a.articleArray=function(e){if(!Array.isArray(e)||0==e.length)return[];return(e=[...new Set(e)]).map((e=>function(e){return{id:e.rpid,type:e.type_id,createTime:F(e.ctime),author:{id:e.mid,name:e.m_name},content:e.content,like:e.like_num,allLike:e.similar_like_sum,qoute:e.similar_count,originId:e.origin_rpid,url:O(e.oid,e.dynamic_id,e.rpid,e.type_id)}}(e)))}(t.replies),a.total=t.all_count})).catch((e=>{throw H("服务器异常","error"),new Error(e.toString())})),a}};p("data-v-0788e07e");const ie={class:"text-container"},re={class:"text-header"},ne=["disabled"],le=[i("span",{class:"iconfont icon-clean"},"清空",-1)],ce={class:"iconfont icon-upload"},oe={class:"text-status"},de={class:"text-status-item float-right"};u();const pe={setup(e){const r=1e3;h([{message:""}]);let n=b({prefix:"",generated:""}),c=b({articleArray:[]});const o=h("嘉然");let p=h(!0);h(!0);const u=y((()=>null!=n.startTime)),g=async()=>{if(!p.value)return;p.value=!1;if(!(o.value.length<=r))return H("输入字数太长了捏","warning"),void(p.value=!0);try{const e=await se.check(o.value);n.prefix=e.prefix,n.generated=e.generated}catch(e){return void(p.value=!0)}H("生成小作文成功了捏，下次生成需等待30秒哦~"),p.value=!0};k((async()=>{await f({count:5})}));const f=async e=>{const a=await se.query(e);c.articleArray=a.articleArray};return(e,h)=>{const f=_,m=G;return a(),t("div",null,[s(f,{class:"text-sm left-item bg-light-100",title:" Help：你可以在以下对话框中输入不多于1000字的开头（可以为空），输入信息后，点击下方「开始生成」来自动生成（迫真）小作文 !",type:"info","show-icon":""}),i("div",ie,[i("ul",re,[i("li",{class:"active copy",onClick:h[0]||(h[0]=e=>o.value=""),disabled:!d(u)},le,8,ne),i("li",{onClick:g,class:"check"},[i("span",ce,l(d(p)?"生成！":"生成中"),1)])]),x(i("textarea",{placeholder:"",maxlength:r,"onUpdate:modelValue":h[1]||(h[1]=e=>o.value=e),class:"text-input"},null,512),[[w,o.value]]),i("div",oe,[i("div",de,"已输入字数："+l(o.value.length)+"/"+l(r),1)])]),s(m,{isMarked:!1,prefix:d(n).prefix,generated:d(n).generated},null,8,["prefix","generated"]),s(ae,{articleArray:d(c).articleArray},null,8,["articleArray"])])}},__scopeId:"data-v-0788e07e"};const ue={};p("data-v-db5edcfe");const he={class:"right-footer"},ge=[A('<div class="footer-links" data-v-db5edcfe><p data-v-db5edcfe>关于项目</p><a href="https://github.com/infinityedge01/ASOUL-Generator-Backend" target="_blank" data-v-db5edcfe><span class="iconfont icon-github" data-v-db5edcfe>项目后端</span></a><a href="https://disk.pku.edu.cn/#/link/88F0D3C9839329210503C7E50634AAFE" target="_blank" data-v-db5edcfe><span class="" data-v-db5edcfe>模型下载</span></a></div><div class="footer-links" data-v-db5edcfe><p data-v-db5edcfe>联系作者</p><a href="https://space.bilibili.com/34255813" target="_blank" data-v-db5edcfe><span class="iconfont icon-bilibili" data-v-db5edcfe>BiliBili</span></a><a href="mailto:infinityedge@pku.edu.cn" target="_blank" data-v-db5edcfe><span class="" data-v-db5edcfe>作者邮箱</span></a></div><div class="footer-links" data-v-db5edcfe><p data-v-db5edcfe>友情链接</p><a href="https://asoul.icu/articles" target="_blank" data-v-db5edcfe>asoul.icu</a><a href="https://asoulcnki.asia/" target="_blank" data-v-db5edcfe>枝网查重</a></div>',3)];u(),ue.render=function(e,s){return a(),t("div",he,ge)},ue.__scopeId="data-v-db5edcfe";const fe=[{name:"贝拉kira",href:"https://space.bilibili.com/672353429",imgPath:"https://i2.hdslb.com/bfs/face/668af440f8a8065743d3fa79cfa8f017905d0065.jpg@128w_128h_1o.webp",imgApplePath:"/assets/images/bella.webp",color:"#db7d74"},{name:"嘉然今天吃什么",href:"https://space.bilibili.com/672328094",imgPath:"https://i2.hdslb.com/bfs/face/d399d6f5cf7943a996ae96999ba3e6ae2a2988de.jpg@128w_128h_1o.webp",imgApplePath:"/assets/images/diana.webp",color:"#e799b0"},{name:"向晚大魔王",href:"https://space.bilibili.com/672346917",imgPath:"https://i0.hdslb.com/bfs/face/566078c52b408571d8ae5e3bcdf57b2283024c27.jpg@128w_128h_1o.webp",imgApplePath:"/assets/images/ava.webp",color:"#9ac8e2"},{name:"乃琳Queen",href:"https://space.bilibili.com/672342685",imgPath:"https://i1.hdslb.com/bfs/face/8895c87082beba1355ea4bc7f91f2786ef49e354.jpg@128w_128h_1o.webp",imgApplePath:"/assets/images/eileen.webp",color:"#576690"},{name:"珈乐Carol",href:"https://space.bilibili.com/351609538",imgPath:"https://i2.hdslb.com/bfs/face/a7fea00016a8d3ffb015b6ed8647cc3ed89cbc63.jpg@128w_128h_1o.webp",imgApplePath:"/assets/images/carol.webp",color:"#b8a6d9"},{name:"A-SOUL_Official",href:"https://space.bilibili.com/703007996",imgPath:"https://i2.hdslb.com/bfs/face/48d65a10a2c643dddc4a51e0a60fae892393417a.jpg@128w_128h_1o.webp",imgApplePath:"/assets/images/cao.webp",color:"#595959"}];p("data-v-629a6ec4");const me=["href"],ve=["src","alt"],be={class:"member-name"};u();var ye=P({setup(e){const{isChrome:s,isSafari:r}=(()=>{if(!window)throw new Error("not in the browser");const e=navigator.userAgent;return{isChrome:/chrome/i.test(e),isSafari:/safari/i.test(e)}})(),{isWin:n,isLinux:c}=(()=>{if(!window)throw new Error("not in the browser");const e=navigator.platform;return{isWin:/win/i.test(e),isLinux:/linux/i.test(e)}})(),o=!s&&r&&!n&&!c;return(e,s)=>(a(),m(d(E),{interval:6e3,arrow:"hover","indicator-position":"none",height:"11rem"},{default:C((()=>[(a(!0),t(g,null,f(d(fe),(e=>(a(),m(d(S),{class:"carousel-item",key:e.name},{default:C((()=>[i("a",{href:e.href},[i("div",{class:"member-info",style:j({backgroundColor:e.color})},[i("img",{referrerpolicy:"no-referrer",class:"avatar-img",src:d(o)?e.imgApplePath:e.imgPath,alt:e.name},null,8,ve),i("div",be,l(e.name),1)],4)],8,me)])),_:2},1024)))),128))])),_:1}))}});ye.__scopeId="data-v-629a6ec4",p("data-v-668aa460");const ke={class:"text-sm"},xe=A('<div class="right-top-description right-item pb-6" data-v-668aa460><h2 class="text-lg high" data-v-668aa460> 更新说明 </h2><ul style="list-style-type:disc;margin-left:1em;" data-v-668aa460><li class="text" data-v-668aa460><p class="high" data-v-668aa460>2020/9/4</p><p data-v-668aa460>数据集更新了截至 2021/9/3 的枝江作文展数据（此前为 2021/8/14），重新训练模型，并优化了生成策略。</p></li><li class="text" data-v-668aa460><p class="high" data-v-668aa460>2020/9/1</p><p data-v-668aa460>根据各位au的建议，本网站的模型正式升级为基于 <span class="high-red" data-v-668aa460>CPM-Distill[1]</span>的模型，比之前的模型更加先进，生成的小作文也更加流畅。同时由于模型增大，生成时间也会相应增长。</p></li></ul></div>',1),we={class:"right-top-description right-item pb-6"},_e=i("h3",{class:"description-title dark:text-gray-300 text-lg pb-2"}," 小作文生成器介绍 ",-1),Ae=i("p",null," 使用GPT-2模型训练的小作文生成器，可以根据你的输入自动补(feng)写(he)出生草的小作文。（提示：输入越长越有意义补全效果越好） ",-1),Pe=i("h3",{class:"description-title dark:text-gray-300 text-lg pb-2"}," 训练数据集： ",-1),Ce={key:0,class:"description-value text-blue-500"},Se={key:1},je=["href"],Ee=i("h3",{class:"description-title dark:text-gray-300 text-lg pb-2"}," 注意事项： ",-1),Me=i("div",null,[i("li",null,[n(" 小作文生成速度较慢，通常需要大约"),i("span",{class:"high"},"10-15"),n("秒。")]),i("li",null,[n(" 因服务器资源有限，每个IP地址每"),i("span",{class:"high"},"30"),n("秒只能调用一次。")]),i("li",null," 如遇到特殊问题（如服务器忙等），请重新尝试。")],-1),Ie=i("p",null," 本项目目前处于测试阶段，包括生成数据的质量与服务器的稳定性都有一定欠缺，请各位谅解。同时如有意见或建议欢迎回馈。 ",-1),Le=A('<div class="right-item space-y-3" data-v-668aa460><h3 class="description-title dark:text-gray-300 text-lg pb-2" data-v-668aa460> 免责声明 </h3><p data-v-668aa460> 本生成器训练数据全部来源于网络，生成结果仅供个人学习与娱乐用途，不代表任何个人意见。开发者不对训练数据以及生成结果负责。同时不得使用本平台上传、分享可能违反法律以及社会公德的数据，因此引起的问题，开发者不承担任何责任。 </p><h3 class="description-title dark:text-gray-300 text-lg pb-2" data-v-668aa460> 致谢 </h3><p data-v-668aa460> 本项目前端由 <a class="high" href="https://github.com/ASoulCnki/ASoulCnkiFrontEndV3" target="_blank" data-v-668aa460>AsoulCnkiFrontEndV3</a> 修改而来，在此对原前端作者与所有数据提供者表示谢意。 </p><h3 class="description-title dark:text-gray-300 text-lg pb-2" data-v-668aa460> 参考文献 </h3><div data-v-668aa460><p data-v-668aa460> [1]Zhang Z, Han X, Zhou H, et al. CPM: A large-scale generative Chinese pre-trained language model[J]. AI Open, 2021, 2: 93-99.</p></div></div>',1);u();var qe=P({setup(e){const r=[{key:"枝江作文展",value:{href:"https://asoulcnki.asia/rank",text:"枝江作文展(截至2021/9/3)"},type:"link"},{key:"asoul.icu",value:{href:"https://asoul.icu/",text:"asoul.icu"},type:"link"}];return(e,n)=>(a(),t("div",ke,[xe,i("div",we,[_e,Ae,Pe,(a(),t(g,null,f(r,(e=>i("div",{key:e.key,class:"text-sm "},["text"==e.type?(a(),t("li",Ce,l(e.value),1)):c("",!0),"link"==e.type?(a(),t("li",Se,[i("a",{href:e.value.href,class:"description-value text-blue-500"},l(e.value.text),9,je)])):c("",!0)]))),64)),Ee,Me,Ie]),Le,s(ye),s(ue)]))}});qe.__scopeId="data-v-668aa460";const Te={class:"main-content"},Ue=M({routes:[{path:"/",name:"index",component:{setup:e=>(e,i)=>(a(),t("div",Te,[s(pe,{class:"left"}),s(qe,{class:"right"})]))}}],history:I()}),Be=L({mutations:{setPage(e,a){e.page=a},resetPage(e){e.page=0},setParams(e,a){e.params=a}},state:{page:1,params:{sortMode:0,timeRangeMode:0,pageSize:10}}});const De={install(e){e.use(E),e.use(S),e.use(q),e.use(r)}};T(D).use(De).use(Ue).use(Be).mount("#app");
